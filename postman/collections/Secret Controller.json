{
	"info": {
		"_postman_id": "d65a1026-f513-4313-bc99-724c0798b13b",
		"name": "Secret Controller",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_uid": "32733901-d65a1026-f513-4313-bc99-724c0798b13b"
	},
	"item": [
		{
			"name": "Create secret",
			"id": "e074c718-c4a4-4053-af2b-0efd84443b77",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"name\": \"API_KEY\",\r\n    \"entries\": [\r\n        {\r\n            \"value\": \"ks_k23mg45kl6k76l\",\r\n            \"environmentId\": \"clxa8d18o000bes3qejcz60n2\"\r\n        },\r\n        {\r\n            \"value\": \"ks_k23mg3kj4nbjk\",\r\n            \"environmentId\": \"clxa8d18o000fes3qxaj2zmrr\"\r\n        }\r\n    ]\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{BASE_URL}}/api/secret/:project_id",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"secret",
						":project_id"
					],
					"variable": [
						{
							"key": "project_id",
							"value": "76397fd8-e902-485a-8f46-a717a7170eae"
						}
					]
				}
			},
			"response": [
				{
					"id": "3faed3e4-4ebd-4fd7-87d2-334205680c1e",
					"name": "Secret created successfully",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"name\": \"API_KEY\",\r\n    \"entries\": [\r\n        {\r\n            \"value\": \"ks_k23mg45kl6k76l\",\r\n            \"environmentId\": \"clxa8d18o000bes3qejcz60n2\"\r\n        },\r\n        {\r\n            \"value\": \"ks_k23mg3kj4nbjk\",\r\n            \"environmentId\": \"clxa8d18o000fes3qxaj2zmrr\"\r\n        }\r\n    ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{BASE_URL}}/api/secret/:project_id",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"api",
								"secret",
								":project_id"
							],
							"variable": [
								{
									"key": "project_id",
									"value": "76397fd8-e902-485a-8f46-a717a7170eae"
								}
							]
						}
					},
					"status": "Created",
					"code": 201,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "X-Powered-By",
							"value": "Express"
						},
						{
							"key": "Vary",
							"value": "Origin"
						},
						{
							"key": "Access-Control-Allow-Credentials",
							"value": "true"
						},
						{
							"key": "Content-Type",
							"value": "application/json; charset=utf-8"
						},
						{
							"key": "Content-Length",
							"value": "1857"
						},
						{
							"key": "ETag",
							"value": "W/\"741-oHFthfyBgmZjMMhfy/qjlIUWkuk\""
						},
						{
							"key": "Date",
							"value": "Tue, 11 Jun 2024 16:54:48 GMT"
						},
						{
							"key": "Connection",
							"value": "keep-alive"
						},
						{
							"key": "Keep-Alive",
							"value": "timeout=5"
						}
					],
					"cookie": [],
					"body": "{\n    \"id\": \"clxan74ly0000sq4o0nwcyrck\",\n    \"name\": \"API_KEY\",\n    \"createdAt\": \"2024-06-11T16:54:48.599Z\",\n    \"updatedAt\": \"2024-06-11T16:54:48.599Z\",\n    \"rotateAt\": null,\n    \"note\": null,\n    \"lastUpdatedById\": \"clxa891aj0001es3qhg5jxa23\",\n    \"projectId\": \"76397fd8-e902-485a-8f46-a717a7170eae\",\n    \"project\": {\n        \"workspaceId\": \"5ac43146-bbd3-416a-bb0d-160ff27706c9\"\n    },\n    \"versions\": [\n        {\n            \"environmentId\": \"clxa8d18o000bes3qejcz60n2\",\n            \"value\": \"{\\\"iv\\\":{\\\"type\\\":\\\"Buffer\\\",\\\"data\\\":[95,99,54,16,3,63,118,103,216,127,195,109,93,118,201,100]},\\\"ephemPublicKey\\\":{\\\"type\\\":\\\"Buffer\\\",\\\"data\\\":[4,29,197,123,124,132,194,178,244,25,133,162,244,78,216,84,135,210,83,103,182,3,154,54,17,30,20,243,156,146,194,215,59,74,191,27,75,130,69,239,225,43,239,225,138,46,51,89,129,146,141,53,245,8,137,250,84,100,99,234,33,56,186,229,22]},\\\"ciphertext\\\":{\\\"type\\\":\\\"Buffer\\\",\\\"data\\\":[93,251,211,239,30,224,89,161,202,182,210,94,184,232,77,47,194,106,226,173,3,112,173,9,173,39,163,60,111,71,116,100]},\\\"mac\\\":{\\\"type\\\":\\\"Buffer\\\",\\\"data\\\":[27,145,59,154,183,182,147,92,55,193,73,113,107,117,2,168,101,122,97,176,248,157,141,125,238,238,7,112,115,235,65,101]}}\"\n        },\n        {\n            \"environmentId\": \"clxa8d18o000fes3qxaj2zmrr\",\n            \"value\": \"{\\\"iv\\\":{\\\"type\\\":\\\"Buffer\\\",\\\"data\\\":[184,79,18,199,181,136,240,217,144,205,57,242,109,253,181,25]},\\\"ephemPublicKey\\\":{\\\"type\\\":\\\"Buffer\\\",\\\"data\\\":[4,158,188,135,204,54,248,230,102,236,132,65,128,166,123,237,230,87,63,220,22,192,203,252,53,93,20,6,253,84,254,144,154,193,81,153,48,253,200,101,124,118,117,189,6,95,164,210,186,27,34,251,232,39,138,156,160,227,154,176,152,114,226,248,9]},\\\"ciphertext\\\":{\\\"type\\\":\\\"Buffer\\\",\\\"data\\\":[251,64,118,217,32,225,74,56,105,69,34,104,100,96,159,247,246,169,219,169,66,148,225,37,100,251,188,194,107,114,84,65]},\\\"mac\\\":{\\\"type\\\":\\\"Buffer\\\",\\\"data\\\":[100,165,154,232,134,95,25,176,27,137,175,98,142,221,143,12,78,53,1,174,174,170,105,98,254,65,203,11,226,83,157,220]}}\"\n        }\n    ]\n}"
				}
			]
		},
		{
			"name": "Update secret",
			"id": "04de499e-7049-48d9-a68a-e6a7062db6b5",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"entries\": [\n        {\n            \"environmentId\": \"clxuc64x20009h5wpd9gefx0x\",\n            \"value\": \"huuuush\"\n        }\n    ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{BASE_URL}}/api/secret/:secret_id",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"secret",
						":secret_id"
					],
					"variable": [
						{
							"key": "secret_id",
							"value": "clxuc7cr8000gh5wp5propn0z"
						}
					]
				}
			},
			"response": [
				{
					"id": "c826c027-3546-4fdc-a9ce-be5b48871f7a",
					"name": "Secret updated successfully",
					"originalRequest": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"entrie\": [\n        {\n            \"environmentId\": \"clxuc64x20009h5wpd9gefx0x\",\n            \"value\": \"huuuush\"\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{BASE_URL}}/api/secret/:secret_id",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"api",
								"secret",
								":secret_id"
							],
							"variable": [
								{
									"key": "secret_id",
									"value": "clxuc7cr8000gh5wp5propn0z"
								}
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "X-Powered-By",
							"value": "Express"
						},
						{
							"key": "Vary",
							"value": "Origin"
						},
						{
							"key": "Access-Control-Allow-Credentials",
							"value": "true"
						},
						{
							"key": "Content-Type",
							"value": "application/json; charset=utf-8"
						},
						{
							"key": "Content-Length",
							"value": "1083"
						},
						{
							"key": "ETag",
							"value": "W/\"43b-sPlDkbBbQ4CW4Rbx8Bj2psGTadM\""
						},
						{
							"key": "Date",
							"value": "Tue, 25 Jun 2024 11:55:33 GMT"
						},
						{
							"key": "Connection",
							"value": "keep-alive"
						},
						{
							"key": "Keep-Alive",
							"value": "timeout=5"
						}
					],
					"cookie": [],
					"body": "{\n    \"id\": \"clxuc7cr8000gh5wp5propn0z\",\n    \"name\": \"API_KEY\",\n    \"createdAt\": \"2024-06-25T11:42:26.900Z\",\n    \"updatedAt\": \"2024-06-25T11:55:33.668Z\",\n    \"rotateAt\": null,\n    \"note\": null,\n    \"lastUpdatedById\": \"clxuc3xu40000h5wpiolii17x\",\n    \"projectId\": \"56b420f7-b4e3-4721-84fb-b4856013f42f\",\n    \"project\": {\n        \"workspaceId\": \"73649bd2-9aa3-4dfd-81e4-48ecd698757a\"\n    },\n    \"versions\": [\n        {\n            \"environmentId\": \"clxuc64x20009h5wpd9gefx0x\",\n            \"value\": \"{\\\"iv\\\":{\\\"type\\\":\\\"Buffer\\\",\\\"data\\\":[110,140,182,195,128,85,10,10,103,221,191,92,103,198,201,28]},\\\"ephemPublicKey\\\":{\\\"type\\\":\\\"Buffer\\\",\\\"data\\\":[4,231,221,69,40,252,19,23,136,46,152,51,8,156,197,73,0,93,32,93,147,13,197,194,107,53,250,249,6,240,9,24,244,174,23,66,174,64,87,198,71,169,76,41,124,32,9,27,56,104,202,82,212,85,36,238,197,211,115,35,154,221,158,102,125]},\\\"ciphertext\\\":{\\\"type\\\":\\\"Buffer\\\",\\\"data\\\":[225,39,42,45,140,107,79,213,181,214,83,185,247,160,39,170,25,186,68,220,170,178,215,155,91,243,114,10,130,75,176,254]},\\\"mac\\\":{\\\"type\\\":\\\"Buffer\\\",\\\"data\\\":[218,112,206,112,248,181,18,158,199,247,206,164,122,65,88,60,235,136,71,105,187,38,33,61,129,139,0,238,7,209,51,175]}}\"\n        }\n    ]\n}"
				}
			]
		},
		{
			"name": "Rollback secret",
			"id": "0347d8d2-026a-4b1a-af60-d071a3a402d7",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{BASE_URL}}/api/secret/:secret_id/rollback/:version?environmentId=abc",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"secret",
						":secret_id",
						"rollback",
						":version"
					],
					"query": [
						{
							"key": "environmentId",
							"value": "abc"
						}
					],
					"variable": [
						{
							"key": "secret_id",
							"value": "clsr9541t0007bd2mvd0150vo"
						},
						{
							"key": "version",
							"value": "3"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Get all secrets of project",
			"id": "d1521a8c-aff2-4156-b666-bd6297396b0a",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{BASE_URL}}/api/secret/all/:project_id?decryptValue=true",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"secret",
						"all",
						":project_id"
					],
					"query": [
						{
							"key": "decryptValue",
							"value": "true"
						}
					],
					"variable": [
						{
							"key": "project_id",
							"value": "56b420f7-b4e3-4721-84fb-b4856013f42f"
						}
					]
				}
			},
			"response": [
				{
					"id": "0fb3ac24-b6ed-44fa-bed2-5bcf7215e9a9",
					"name": "Secrets fetched successfully",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/api/secret/all/:project_id?decryptValue=true",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"api",
								"secret",
								"all",
								":project_id"
							],
							"query": [
								{
									"key": "decryptValue",
									"value": "true"
								}
							],
							"variable": [
								{
									"key": "project_id",
									"value": "76397fd8-e902-485a-8f46-a717a7170eae"
								}
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "X-Powered-By",
							"value": "Express"
						},
						{
							"key": "Vary",
							"value": "Origin"
						},
						{
							"key": "Access-Control-Allow-Credentials",
							"value": "true"
						},
						{
							"key": "Content-Type",
							"value": "application/json; charset=utf-8"
						},
						{
							"key": "Content-Length",
							"value": "532"
						},
						{
							"key": "ETag",
							"value": "W/\"214-REhIOe0f1ud/HkkhjFCMegnmIAY\""
						},
						{
							"key": "Date",
							"value": "Tue, 11 Jun 2024 16:57:30 GMT"
						},
						{
							"key": "Connection",
							"value": "keep-alive"
						},
						{
							"key": "Keep-Alive",
							"value": "timeout=5"
						}
					],
					"cookie": [],
					"body": "[\n    {\n        \"secret\": {\n            \"id\": \"clxan74ly0000sq4o0nwcyrck\",\n            \"name\": \"API_KEY\",\n            \"createdAt\": \"2024-06-11T16:54:48.599Z\",\n            \"updatedAt\": \"2024-06-11T16:54:48.599Z\",\n            \"rotateAt\": null,\n            \"note\": null,\n            \"lastUpdatedById\": \"clxa891aj0001es3qhg5jxa23\",\n            \"projectId\": \"76397fd8-e902-485a-8f46-a717a7170eae\",\n            \"lastUpdatedBy\": {\n                \"id\": \"clxa891aj0001es3qhg5jxa23\",\n                \"name\": \"Raj\"\n            }\n        },\n        \"values\": [\n            {\n                \"environment\": {\n                    \"id\": \"clxa8d18o000bes3qejcz60n2\",\n                    \"name\": \"Dev\"\n                },\n                \"value\": \"ks_k23mg45kl6k76l\"\n            },\n            {\n                \"environment\": {\n                    \"id\": \"clxa8d18o000fes3qxaj2zmrr\",\n                    \"name\": \"Production\"\n                },\n                \"value\": \"ks_k23mg3kj4nbjk\"\n            }\n        ]\n    }\n]"
				}
			]
		},
		{
			"name": "Delete secret",
			"id": "b66b2d50-adea-4a38-a5e4-157f9dad4a4e",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "{{BASE_URL}}/api/secret/clrg285zc0001hrv304imjmeu/clrg2nbiv000122t3f3tboqc3",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"secret",
						"clrg285zc0001hrv304imjmeu",
						"clrg2nbiv000122t3f3tboqc3"
					]
				}
			},
			"response": []
		},
		{
			"name": "Fetch all by project and environment",
			"id": "fba7daaa-123c-4bee-ac46-9911c5443f8f",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{BASE_URL}}/api/secret/all/:project_id/:environment_id",
					"host": [
						"{{BASE_URL}}"
					],
					"path": [
						"api",
						"secret",
						"all",
						":project_id",
						":environment_id"
					],
					"variable": [
						{
							"key": "project_id",
							"value": "c2f78c83-c9f8-4f79-8cb1-860e39dd8178"
						},
						{
							"key": "environment_id",
							"value": "clxvlpw770009n2nvhh3rl8wn"
						}
					]
				}
			},
			"response": [
				{
					"id": "4da269c2-394d-4836-8315-73854788e66b",
					"name": "Successfully fetched all secrets",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{BASE_URL}}/api/secret/all/:project_id/:environment_id",
							"host": [
								"{{BASE_URL}}"
							],
							"path": [
								"api",
								"secret",
								"all",
								":project_id",
								":environment_id"
							],
							"variable": [
								{
									"key": "project_id",
									"value": "c2f78c83-c9f8-4f79-8cb1-860e39dd8178"
								},
								{
									"key": "environment_id",
									"value": "clxvlpw770009n2nvhh3rl8wn"
								}
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "X-Powered-By",
							"value": "Express"
						},
						{
							"key": "Vary",
							"value": "Origin"
						},
						{
							"key": "Access-Control-Allow-Credentials",
							"value": "true"
						},
						{
							"key": "Content-Type",
							"value": "application/json; charset=utf-8"
						},
						{
							"key": "Content-Length",
							"value": "63"
						},
						{
							"key": "ETag",
							"value": "W/\"3f-03gUnueXQezOXcJZfJpWcTsucpE\""
						},
						{
							"key": "Date",
							"value": "Wed, 26 Jun 2024 10:39:11 GMT"
						},
						{
							"key": "Connection",
							"value": "keep-alive"
						},
						{
							"key": "Keep-Alive",
							"value": "timeout=5"
						}
					],
					"cookie": [],
					"body": "[\n    {\n        \"name\": \"API_KEY\",\n        \"value\": \"super secret\",\n        \"isPlaintext\": false\n    }\n]"
				}
			]
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{JWT}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "3eb1d5a0-4b0d-452e-b0c2-770639fba3ca",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "5c520a39-3862-4a46-a05c-8dcbe7f21b7a",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}